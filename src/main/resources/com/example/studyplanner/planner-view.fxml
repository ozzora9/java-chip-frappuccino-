<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.ColorPicker?>

<StackPane prefHeight="720.0" prefWidth="1200.0" style="-fx-background-color: #4a3b32;" stylesheets="@planner.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.studyplanner.controller.PlannerController">

    <!-- 책 이미지 -->
    <ImageView fitHeight="650.0" fitWidth="950.0" pickOnBounds="true" translateY="30.0">
        <image>
            <Image url="@images/UI_TravelBook_BookCover01a.png" />
        </image>
        <effect>
            <javafx.scene.effect.DropShadow color="#00000080" radius="15" spread="0.2" />
        </effect>
    </ImageView>



    <!-- 책 페이지 좌우 -->
    <HBox alignment="CENTER" spacing="0" translateY="30.0">
        <!-- 왼쪽 페이지 -->
        <StackPane>
            <ImageView fitHeight="600.0" preserveRatio="true">
                <image>
                    <Image url="@images/UI_TravelBook_BookPageLeft01a.png" />
                </image>
            </ImageView>
            <VBox maxWidth="350" spacing="10">
                <padding>
                    <Insets bottom="40" left="20" right="20" top="80" />
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="10"
                      style="-fx-background-color: rgba(176, 141, 116, 0.15); -fx-background-radius: 10; -fx-padding: 5 15 5 15;">

                    <DatePicker fx:id="currentDatePicker"
                                prefWidth="170"
                                promptText="날짜 선택"
                                onAction="#handleDateChanged"
                                style="-fx-background-color: transparent; -fx-border-width: 0; -fx-font-size: 14px; -fx-font-family: 'Georgia'; -fx-font-weight: bold; -fx-text-fill: #5c3a21;"/>

                    <Region prefWidth="1.5" prefHeight="15"
                            style="-fx-background-color: #b08d74; -fx-opacity: 0.4;" />

                    <TextField fx:id="weatherInput"
                               promptText="☀ 날씨"
                               prefWidth="70"
                               style="-fx-font-family: 'Georgia'; -fx-font-size: 13px; -fx-text-fill: #5c3a21; -fx-prompt-text-fill: rgba(92, 58, 33, 0.5); -fx-background-color: transparent;" />
                </HBox>


                <!-- 오늘의 다짐 & 진행률 -->
                <VBox spacing="8">
                    <TextField fx:id="quoteInput"
                               alignment="CENTER_LEFT"
                               promptText="&quot;오늘의 다짐&quot;"
                               style="-fx-background-color: transparent; -fx-font-family: 'Georgia', serif; -fx-font-style: italic; -fx-font-size: 13px; -fx-text-fill: #8B4513; -fx-prompt-text-fill: rgba(139,69,19, 0.5); -fx-border-color: #b08d74; -fx-border-radius: 10; -fx-padding: 5;" />

                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label style="-fx-font-size: 12px; -fx-font-weight: bold;" text="달성률" textFill="#5c3a21" />

                        <StackPane HBox.hgrow="ALWAYS">
                            <ProgressBar fx:id="progressBar"
                                         maxWidth="Infinity"
                                         progress="0.0"
                                         styleClass="paper-progress-bar"
                                         prefHeight="20.0"/>

                            <Label fx:id="progressLabel"
                                   text="0%"
                                   alignment="CENTER"
                                   maxWidth="Infinity"
                                   style="-fx-font-size: 11px; -fx-text-fill: #3e2723; -fx-font-weight: bold; -fx-effect: dropshadow(one-pass-box, white, 2, 0.5, 0, 0);" />
                        </StackPane>
                    </HBox>
                </VBox>

                <!-- Study Plan -->
                <VBox spacing="5">
                    <Label style="-fx-font-weight: bold; -fx-text-fill: #5c3a21;" text="Study Plan" />
                    <HBox spacing="5">
                        <TextField fx:id="subjectInput" prefWidth="60" promptText="과목" styleClass="paper-input" />
                        <TextField fx:id="taskInput" promptText="내용" styleClass="paper-input" HBox.hgrow="ALWAYS" />
                        <ColorPicker fx:id="colorPicker" styleClass="pixel-color-picker"/>
                        <Button onAction="#handleAddRow" styleClass="add-btn" text="+" />
                    </HBox>
                </VBox>

                <!-- Table -->
                <TableView fx:id="table" editable="true" maxHeight="380.0" prefHeight="380.0" styleClass="paper-table" VBox.vgrow="NEVER">
                    <columns>
                        <TableColumn fx:id="colSubject" prefWidth="60" text="과목" />
                        <TableColumn fx:id="colContent" prefWidth="180" text="내용" />
                        <TableColumn fx:id="colDone" prefWidth="35" text="완료" />
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                </TableView>
            </VBox>
        </StackPane>

        <!-- 오른쪽 페이지 -->
        <StackPane>
            <ImageView fitHeight="600.0" preserveRatio="true">
                <image>
                    <Image url="@images/UI_TravelBook_BookPageRight01a.png" />
                </image>
            </ImageView>
            <HBox maxWidth="380" spacing="10">
                <padding>
                    <Insets bottom="30" left="30" right="40" top="60" />
                </padding>

                <VBox prefWidth="180" spacing="5" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets bottom="40" top="40.0" />
                    </padding>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #5c3a21;" text="Timetable" />

                        <Region HBox.hgrow="ALWAYS" />

                        <Label style="-fx-font-size: 10px; -fx-text-fill: #888;" text="색상 선택 :" />

                        <ColorPicker fx:id="manualColor" prefWidth="40" styleClass="pixel-color-picker" style="-fx-font-size: 10px;"/>
                    </HBox>
                    <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="paper-scroll" vbarPolicy="NEVER">
                        <GridPane fx:id="timeTableGrid" hgap="0" vgap="0" gridLinesVisible="false" styleClass="timetable-grid">
                            <columnConstraints>
                                <ColumnConstraints hgrow="NEVER" minWidth="25.0" prefWidth="40.0" />

                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14" />
                                <ColumnConstraints hgrow="ALWAYS" percentWidth="14" />
                            </columnConstraints>
                            <rowConstraints>
                                <!-- 19행 -->
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="25.0" prefHeight="25.0" vgrow="SOMETIMES" />
                            </rowConstraints>
                            <children>
                                <Label styleClass="time-label" text="06" GridPane.rowIndex="0" />
                                <Label styleClass="time-label" text="07" GridPane.rowIndex="1" />
                                <Label styleClass="time-label" text="08" GridPane.rowIndex="2" />
                                <Label styleClass="time-label" text="09" GridPane.rowIndex="3" />
                                <Label styleClass="time-label" text="10" GridPane.rowIndex="4" />
                                <Label styleClass="time-label" text="11" GridPane.rowIndex="5" />
                                <Label styleClass="time-label" text="12" GridPane.rowIndex="6" />
                                <Label styleClass="time-label" text="13" GridPane.rowIndex="7" />
                                <Label styleClass="time-label" text="14" GridPane.rowIndex="8" />
                                <Label styleClass="time-label" text="15" GridPane.rowIndex="9" />
                                <Label styleClass="time-label" text="16" GridPane.rowIndex="10" />
                                <Label styleClass="time-label" text="17" GridPane.rowIndex="11" />
                                <Label styleClass="time-label" text="18" GridPane.rowIndex="12" />
                                <Label styleClass="time-label" text="19" GridPane.rowIndex="13" />
                                <Label styleClass="time-label" text="20" GridPane.rowIndex="14" />
                                <Label styleClass="time-label" text="21" GridPane.rowIndex="15" />
                                <Label styleClass="time-label" text="22" GridPane.rowIndex="16" />
                                <Label styleClass="time-label" text="23" GridPane.rowIndex="17" />
                                <Label styleClass="time-label" text="24" GridPane.rowIndex="18" />
                            </children>
                        </GridPane>
                    </ScrollPane>
                </VBox>

                <!-- 오른쪽 보드 -->
                <VBox prefWidth="130" spacing="6">
                    <padding><Insets top="40.0" /></padding>

                    <!-- Timer -->
                    <VBox alignment="CENTER" onMouseClicked="#goToTimer"
                          style="-fx-border-color: #b08d74; -fx-border-radius: 10; -fx-padding: 8; -fx-cursor: hand;">
                        <VBox.margin><Insets top="10.0"/></VBox.margin>
                        <Label style="-fx-font-size: 10px; -fx-text-fill: #888;" text="TOTAL TIME" />

                        <Label fx:id="totalTimerLabel"
                               style="-fx-font-family: 'Georgia', serif; -fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #5c3a21;"
                               text="00h 00m" />
                    </VBox>

                    <!-- To-Do -->
                    <VBox spacing="5" maxHeight="150" prefHeight="150" >
                        <VBox.margin>
                            <Insets top="10" />
                        </VBox.margin>
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #5c3a21;" text="To-Do" />
                        <VBox spacing="5" prefHeight="150" style="-fx-border-color: #b08d74; -fx-border-radius: 5; -fx-padding: 8;">

                            <HBox spacing="2" alignment="CENTER_LEFT">
                                <TextField fx:id="todayInput" promptText="할 일" styleClass="paper-input" HBox.hgrow="ALWAYS" />
                                <Button onAction="#handleAddToday" styleClass="add-btn" text="+" />
                            </HBox>

                            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="paper-scroll" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS">
                                <VBox fx:id="todayList" spacing="2" />
                            </ScrollPane>

                        </VBox>
                    </VBox>

                    <!-- 날짜 & D-Day -->
                    <VBox alignment="CENTER" spacing="5"
                          style="-fx-border-color: #b08d74; -fx-border-radius: 10; -fx-padding: 8; -fx-background-color: transparent;">

                        <Button text="⚙ D-Day 설정" onAction="#handleSetDDay"
                                maxWidth="Infinity"
                                styleClass="dday-setting-btn"
                                style=" -fx-cursor: hand;"/>

                        <Label fx:id="ddayLabel" text="D-Day" styleClass="dday-result-text" />

                    </VBox>

                    <!-- Goal Time -->
                    <VBox spacing="5">
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #5c3a21;" text="Goal Time" />
                        <!-- 목표시간 -->
                        <HBox alignment="CENTER_LEFT" spacing="5">
                            <Label style="-fx-font-size: 10px;" text="목표시간" />
                            <TextField fx:id="targetHour" prefWidth="80" promptText="10h" styleClass="paper-input" />
                        </HBox>
                        <!-- 수행시간 -->
                        <HBox alignment="CENTER_LEFT" spacing="5">
                            <Label style="-fx-font-size: 10px;" text="수행시간" />
                            <TextField fx:id="todaysum" prefWidth="80" promptText="0h" styleClass="paper-input" />
                        </HBox>
                    </VBox>


                    <!-- Memo -->

                    <VBox spacing="5">
                        <Label style="-fx-font-weight: bold; -fx-text-fill: #5c3a21;" text="Memo" />
                        <TextArea fx:id="memoArea" prefRowCount="2" promptText="메모..." styleClass="paper-input" wrapText="true" />
                    </VBox>

                </VBox>
            </HBox>


        </StackPane>
        <!-- 상단 픽셀 탭 버튼 -->

    </HBox>
    <HBox alignment="CENTER" maxHeight="-Infinity" maxWidth="-Infinity" spacing="8" translateX="-280.0" translateY="-290.0">
        <Button contentDisplay="CENTER" onAction="#navGarden" styleClass="pixel-tab-btn-top">
            <graphic>
                <StackPane >
                    <ImageView fitHeight="45" fitWidth="55" preserveRatio="true">
                        <image><Image url="@images/UI_TravelBook_Marker01a.png" /></image>
                    </ImageView>
                    <Label styleClass="pixel-tab-text" text="정원"/>
                </StackPane>
            </graphic>
        </Button>
        <Button contentDisplay="CENTER" onAction="#navPlanner" styleClass="pixel-tab-btn-top">
            <graphic>
                <StackPane>
                    <ImageView fitHeight="45" fitWidth="55" preserveRatio="true">
                        <image><Image url="@images/UI_TravelBook_Marker01a.png" /></image>
                    </ImageView>
                    <Label styleClass="pixel-tab-text" text="플래너"/>
                </StackPane>
            </graphic>
        </Button>
        <Button contentDisplay="CENTER" onAction="#navTimer" styleClass="pixel-tab-btn-top">
            <graphic>
                <StackPane>
                    <ImageView fitHeight="45" fitWidth="55" preserveRatio="true">
                        <image><Image url="@images/UI_TravelBook_Marker01a.png" /></image>
                    </ImageView>
                    <Label styleClass="pixel-tab-text" text="타이머"/>
                </StackPane>
            </graphic>
        </Button>
        <Button contentDisplay="CENTER" onAction="#navBook" styleClass="pixel-tab-btn-top">
            <graphic>
                <StackPane>
                    <ImageView fitHeight="45" fitWidth="55" preserveRatio="true">
                        <image><Image url="@images/UI_TravelBook_Marker01a.png" /></image>
                    </ImageView>
                    <Label styleClass="pixel-tab-text" text="컬렉션"/>
                </StackPane>
            </graphic>
        </Button>
    </HBox>
</StackPane>
